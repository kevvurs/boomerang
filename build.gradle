buildscript {
  repositories {
  	jcenter()
    mavenCentral()
  }

  dependencies {
    classpath 'com.google.cloud.tools:appengine-gradle-plugin:+'
  }
}

apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'com.google.cloud.tools.appengine'

group = 'com.rush.appengine'
version = '1.0'

sourceCompatibility = 1.7
targetCompatibility = 1.7

repositories {
	maven {
    	url 'https://maven-central.storage.googleapis.com'
    }
    jcenter()  
    mavenCentral()
}

dependencies {
    compile 'org.springframework:spring-context:4.3.5.RELEASE'
    compile 'org.springframework:spring-jdbc:4.3.5.RELEASE'
    compile 'org.springframework:spring-core:4.3.5.RELEASE'
    compile 'org.springframework:spring-web:4.3.5.RELEASE'
    compile 'org.springframework:spring-test:4.3.5.RELEASE'
    compile 'org.glassfish.jersey.core:jersey-client:2.22.2'
    compile 'org.glassfish.jersey.core:jersey-server:2.22.2'
    compile 'org.glassfish.jersey.ext:jersey-spring3:2.22.2'
    compile 'log4j:apache-log4j-extras:1.2.17'
    testCompile 'org.testng:testng:6.3.1'
    providedCompile group: 'javax.servlet', name: 'servlet-api', version:'2.5'
  	compile 'com.google.appengine:appengine:+'
  	compile 'mysql:mysql-connector-java:5.1.40'
  	compile 'com.google.cloud.sql:mysql-socket-factory:1.0.2'
}

appengine {
  run {
    port = 8080
  }

  deploy {
    stopPreviousVersion = true
    promote = true
  }
}


test {
	useTestNG {
        suites 'src/test/resources/rush-testng.xml'
    } 
}